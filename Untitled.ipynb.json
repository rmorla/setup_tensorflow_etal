{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "!git clone https://github.com/calclavia/htm-tensorflow.git"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "\u001b[33mThe directory '/.cache/pip/http' or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\u001b[0m\n",
      "\u001b[33mThe directory '/.cache/pip' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo's -H flag.\u001b[0m\n",
      "Collecting tqdm\n",
      "\u001b[?25l  Downloading https://files.pythonhosted.org/packages/45/af/685bf3ce889ea191f3b916557f5677cc95a5e87b2fa120d74b5dd6d049d0/tqdm-4.32.1-py2.py3-none-any.whl (49kB)\n",
      "\u001b[K    100% |████████████████████████████████| 51kB 1.3MB/s ta 0:00:011\n",
      "\u001b[?25hInstalling collected packages: tqdm\n",
      "\u001b[33m  The script tqdm is installed in '/.local/bin' which is not on PATH.\n",
      "  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\u001b[0m\n",
      "Successfully installed tqdm-4.32.1\n",
      "\u001b[33mYou are using pip version 19.0.3, however version 19.1.1 is available.\n",
      "You should consider upgrading via the 'pip install --upgrade pip' command.\u001b[0m\n"
     ]
    }
   ],
   "source": [
    "!pip install --user tqdm"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Using TensorFlow backend.\n",
      "WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/tensorflow/python/framework/op_def_library.py:263: colocate_with (from tensorflow.python.framework.ops) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Colocations handled automatically by placer.\n",
      "WARNING:tensorflow:From /tf/code/htm/htm-tensorflow/layers/spatial_pooler.py:65: to_int64 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Use tf.cast instead.\n",
      "WARNING:tensorflow:From /tf/code/htm/htm-tensorflow/layers/spatial_pooler.py:92: to_float (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Use tf.cast instead.\n",
      "Loading data...\n",
      "WARNING:tensorflow:From mnist.py:47: read_data_sets (from tensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Please use alternatives such as official/mnist/dataset.py from tensorflow/models.\n",
      "WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:260: maybe_download (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Please write your own downloading logic.\n",
      "WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:262: extract_images (from tensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Please use tf.data to implement this functionality.\n",
      "Extracting data/train-images-idx3-ubyte.gz\n",
      "WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:267: extract_labels (from tensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Please use tf.data to implement this functionality.\n",
      "Extracting data/train-labels-idx1-ubyte.gz\n",
      "Extracting data/t10k-images-idx3-ubyte.gz\n",
      "Extracting data/t10k-labels-idx1-ubyte.gz\n",
      "WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:290: DataSet.__init__ (from tensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Please use alternatives such as official/mnist/dataset.py from tensorflow/models.\n",
      "Processing data...\n",
      "100%|████████████████████████████████████| 55000/55000 [02:44<00:00, 334.83it/s]\n",
      "2019-06-11 10:39:13.925846: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA\n",
      "2019-06-11 10:39:13.948368: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94] CPU Frequency: 3696000000 Hz\n",
      "2019-06-11 10:39:13.949498: I tensorflow/compiler/xla/service/service.cc:150] XLA service 0x5f51b100 executing computations on platform Host. Devices:\n",
      "2019-06-11 10:39:13.949521: I tensorflow/compiler/xla/service/service.cc:158]   StreamExecutor device (0): <undefined>, <undefined>\n",
      "=== Epoch 0 ===\n",
      "Training HTM...\n",
      "100%|███████████████████████████████████████| 1546/1546 [00:39<00:00, 39.33it/s]\n",
      "Training classifier...\n",
      "WARNING:tensorflow:From /usr/local/lib/python3.5/dist-packages/tensorflow/python/ops/math_ops.py:3066: to_int32 (from tensorflow.python.ops.math_ops) is deprecated and will be removed in a future version.\n",
      "Instructions for updating:\n",
      "Use tf.cast instead.\n",
      "Epoch 1/10\n",
      "49500/49500 [==============================] - 1s 21us/step - loss: 0.5268 - acc: 0.8743\n",
      "Epoch 2/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.2450 - acc: 0.9301\n",
      "Epoch 3/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1932 - acc: 0.9450\n",
      "Epoch 4/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1643 - acc: 0.9528\n",
      "Epoch 5/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1447 - acc: 0.9585\n",
      "Epoch 6/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1300 - acc: 0.9632\n",
      "Epoch 7/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1188 - acc: 0.9663\n",
      "Epoch 8/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1094 - acc: 0.9699\n",
      "Epoch 9/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1017 - acc: 0.9723\n",
      "Epoch 10/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.0948 - acc: 0.9746\n",
      "Validating...\n",
      "5500/5500 [==============================] - 0s 10us/step\n",
      "Accuracy: 0.9347272728139704\n",
      "=== Epoch 1 ===\n",
      "Training HTM...\n",
      "100%|███████████████████████████████████████| 1546/1546 [00:37<00:00, 41.96it/s]\n",
      "Training classifier...\n",
      "Epoch 1/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1809 - acc: 0.9418\n",
      "Epoch 2/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1395 - acc: 0.9544\n",
      "Epoch 3/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1196 - acc: 0.9614\n",
      "Epoch 4/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.1047 - acc: 0.9674\n",
      "Epoch 5/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.0933 - acc: 0.9715\n",
      "Epoch 6/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.0841 - acc: 0.9747\n",
      "Epoch 7/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.0764 - acc: 0.9780\n",
      "Epoch 8/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.0703 - acc: 0.9804\n",
      "Epoch 9/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.0645 - acc: 0.9827\n",
      "Epoch 10/10\n",
      "49500/49500 [==============================] - 1s 19us/step - loss: 0.0601 - acc: 0.9841\n",
      "Validating...\n",
      "5500/5500 [==============================] - 0s 8us/step\n",
      "Accuracy: 0.9519999998699535\n",
      "=== Epoch 2 ===\n",
      "Training HTM...\n",
      " 15%|██████                                  | 235/1546 [00:05<00:31, 41.97it/s]"
     ]
    }
   ],
   "source": [
    "!python mnist.py"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.5.2"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
